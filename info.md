### Что доучить
- Docker
- Redis
- Spring (углубленно)
- Amazon S3
- CI/CD
- Системное мышление

---

# Основные темы

## Логи
- **Логи** — текстовые записи о работе программы.
- **Логер** — инструмент для создания логов.
- **@Slf4j** — аннотация Lombok для автоматического добавления логгера в класс.

## JPA и Hibernate
- **JPA** — стандарт работы с базами данных в Java (описывает, что нужно делать).
- **Hibernate** — одна из реализаций JPA (делает, как описано в JPA + добавляет своё).
- При наследовании `JpaRepository` — автоматически получаем CRUD-операции, пагинацию и сортировку.
- Импортировать лучше из пакета `javax.persistence`, чтобы легко сменить реализацию при необходимости.

## Бины в Spring
- Централизованное управление зависимостями.
- Лёгкое тестирование.
- Повторное использование.
- Возможность использовать AOP, транзакции, безопасность и др.

## Первичный ключ
- **Primary Key** — уникальный идентификатор записи в таблице базы данных.

## Основные аннотации Spring и JPA

| Аннотация | Назначение |
|:----------|:-----------|
| @Configuration | Класс конфигурации для Spring. |
| @Controller | Обработка пользовательских запросов и возврат шаблонов. |
| @PathVariable | Получение переменной из URL пути. |
| @Entity | Сообщает, что класс — это таблица в базе данных. |
| @Id | Поле является первичным ключом. |
| @Column(name = "...") | Явное указание имени столбца в таблице. |
| @Data | Автоматически генерирует геттеры, сеттеры и др. методы. |
| @Lob | Поле хранится как большой объект (CLOB/BLOB). |
| @ManyToOne(fetch = FetchType.EAGER) | Много к одному (жадная загрузка). |
| @OneToMany(fetch = FetchType.LAZY) | Один ко многим (ленивая загрузка). |
| @PrePersist, @PreUpdate | Метод вызывается до сохранения/обновления объекта. |
| @MappedBy | Указывает на сторону владельца связи в JPA. |
| @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER) | Один к одному, с каскадом операций и жадной загрузкой. |
| @ElementCollection | Коллекция простых элементов (например, Enum) связана с сущностью. |
| @Enumerated(EnumType.STRING) | Хранение Enum как строки. |

## HTML
- HTML — язык разметки для создания веб-страниц.
- Примеры тегов: `<html>`, `<head>`, `<body>`, `<div>`, `<p>`, `<a>`, `<hr>`.

## FreeMarker
- Шаблонный движок для генерации HTML.
- Работает в связке с Spring MVC через ViewResolver.
- Чтобы вернуть JSON, а не HTML — нужно использовать @ResponseBody или @RestController.

## Lombok
- Lombok упрощает код, генерируя:
    - Геттеры/сеттеры (@Getter, @Setter)
    - Конструкторы (@AllArgsConstructor, @NoArgsConstructor, @RequiredArgsConstructor)
    - toString, equals, hashCode (@Data включает их автоматически)

## War и Jar
- **JAR** — обычная библиотека/архив Java-приложения.
- **WAR** — JAR + структура для развёртывания на веб-серверах.

## Конструкторы и Dependency Injection
- Конструкторы позволяют внедрять зависимости (DI) извне.
- Это повышает гибкость, тестируемость, поддерживаемость.

## Model в Spring MVC
- Интерфейс для передачи данных от backend на frontend через шаблоны.

Пример:
```java
model.addAttribute("products", productService.listProducts());
```

## Enum в Java
- `enum` — перечисление фиксированных наборов констант.

## Сущность
- Entity = Класс + аннотация @Entity = Строка в таблице базы данных.

## Spring Security
- Базовая безопасность "из коробки" (авто-логин/пароль).
- Для интеграции нужно:
    - Наследовать `UserDetails`
    - Переопределить `UserDetailsService` (метод `loadUserByUsername`)
    - Использовать аннотацию `@EnableWebSecurity`

Настройки безопасности HTTP-запросов:
```java
requestMatchers(...).permitAll(); // разрешить доступ
anyRequest().authenticated();     // авторизация на все остальные
formLogin().loginPage("/login");  // страница входа
logout().permitAll();             // выход доступен всем
```

## CSRF Token
- Уникальный токен для защиты от подделки POST-запросов.

## Principal
- Интерфейс для получения данных о текущем аутентифицированном пользователе.

## Преобразование Enum в Set<String>
```java
Set<String> roles = Arrays.stream(Role.values())
    .map(Role::name)
    .collect(Collectors.toSet());
```

## Перенаправление в Spring MVC
```java
return "redirect:/admin"; // Перенаправление на другую страницу
```

---

# Краткие определения
- **Template** — шаблон.
- **Dependency Injection (DI)** — внедрение зависимостей.
- **ViewResolver** — компонент Spring, отвечающий за нахождение шаблона для рендеринга.
- **EntityManager** — основной API для работы с JPA сущностями.
- **FetchType.LAZY/EAGER** — стратегия загрузки связанных сущностей.
- **CascadeType.ALL** — каскад всех операций (persist, merge, remove и т.д.).
- **ObjectMapper** — это класс из библиотеки Jackson, который умеет:
читать JSON и превращать его в Java-объекты (Map, классы и т.д.)
и наоборот — превращать Java-объекты в JSON.

---

Redis (REmote DIctionary Server) — это сверхбыстрая база данных, работающая в оперативной памяти (in-memory). Часто используется для:

- Кэширования (например, для хранения сессий),
- Pub/Sub сообщений,
- Очередей задач,
- Rate Limiting (ограничение скорости запросов) — то, что тебе нужно.
Redis работает очень быстро, поддерживает ключ-значение, списки, множества и т.д.

---

Лямбда-функция (или лямбда-выражение) — это короткая запись анонимного метода, которую можно передать как аргумент.
- (parameters) -> { expression_or_block } 
пример:
@FunctionalInterface
interface Printer { 
  void print(String message);
}

public class Main {
public static void main(String[] args) {
  Printer p = message -> System.out.println(message);
  p.print("Привет, Java!");
  }
}
В данном случае создается интерфейс с методом print, а ниже создается объект этого интерфейса с реализацией метода через лямбда функции,
а далее вызывается метод этого объекта.

---
yml - простой формат конфигурации, который читабельнее и короче, чем XML или JSON, активно используется в Spring Boot, Docker, Kubernetes и др.

Redis — это база данных, размещаемая в памяти, которая используется, в основном, в роли кеша, находящегося перед другой, «настоящей» базой данных, 
вроде MySQL или PostgreSQL. Redis — это in-memory key-value store, т.е. база данных, у которой вся работа происходит в оперативной памяти.
Это обеспечивает мгновенный доступ к данным (намного быстрее, чем чтение с диска).

---

ServerWebExchange - предоставляет HTTP запрос и ответ
GatewayFilterChain — цепочка фильтров. Мы либо продолжаем её (chain.filter(...)), либо останавливаем.

## Реактивное программирование (ассинхронность потоков)
Асинхронность: Реактивные программы могут выполнять несколько операций одновременно, не блокируя потоки, что позволяет более эффективно использовать ресурсы.
В реактивном программировании ты используешь асинхронные потоки. Вместо того, чтобы заставлять поток ожидать завершения операции, 
ты получаешь возможность продолжать выполнять другие задачи, пока не будет получен результат.
Mono<T> — представляет собой реактивный поток, который может содержать одно значение или ничего. Это аналог обещания, что значение будет доступно в будущем.
Flux<T> — представляет собой поток данных, который может содержать 0 или более значений.
Обработка событий — каждый поток событий может быть обработан, как только данные поступят, не ожидая завершения всех других процессов.

В нашем случае используется ассинхронность при подсчете запросов пользователей, чтобы другие пользоатели могли обращаться в сайту при выполнении 
операции.

---

HttpServletRequest представляет собой запрос, который клиент отправляет на сервер. 
Этот объект предоставляет множество методов для получения информации о запросе, такой как параметры запроса, заголовки, путь, сессии, тело запроса и многое другое.
Методы HttpServletRequest:
- getRemoteAddr(): Возвращает IP-адрес клиента, который отправил запрос.
- getHeader(String name): Возвращает значение заголовка с указанным именем.
- getParameter(String name): Получает параметр запроса (например, значения из формы или URL-строки).

HttpServletResponse представляет собой ответ, который сервер отправляет клиенту в ответ на запрос.

FilterChain представляет собой цепочку фильтров, через которые проходит запрос и ответ в веб-приложении.

StringRedisTemplate - данные redis представлены в виде строк.

redisTemplate позволяет проверять наличие ключей в базе redis.

SecurityContextHolder - это "хранилище безопасности", где Spring Security хранит информацию о текущем пользователе во время обработки запроса.